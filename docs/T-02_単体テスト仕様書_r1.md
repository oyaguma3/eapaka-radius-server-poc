# T-02 単体テスト仕様書 (r1)

## 1. 概要

### 1.1 目的

本ドキュメントは、EAP-AKA RADIUS PoC環境を構成する各コンポーネントの単体テストを体系的に定義する。T-01テスト戦略書で定義された単体テスト方針に基づき、テストケースのID管理、テスト内容、期待結果を明確化し、品質ゲートの達成状況を可視化する。

### 1.2 スコープ

**本書で扱う範囲：**

- 全コンポーネントの単体テストケース定義
- テストID体系とテスト関数の対応管理
- パッケージ別カバレッジ目標の設定
- テスト実行・レポート手順

**本書で扱わない範囲：**

| 範囲 | 参照先 |
|------|--------|
| テスト戦略・品質ゲート全体方針 | T-01 テスト戦略書 (r2) |
| 結合テストシナリオ | T-03 結合テスト仕様書 |
| E2Eテストシナリオ | T-04 E2Eテスト仕様書 |
| コーディング規約・テスト命名規則 | E-02 コーディング規約（簡易版）(r1) |

### 1.3 参照ドキュメント

| ドキュメント | 参照内容 |
|-------------|---------|
| T-01 テスト戦略書 (r2) | カバレッジ目標、モック戦略、テストデータ、品質ゲート |
| T-03 結合テスト仕様書 | ドキュメント構成パターン参考 |
| E-02 コーディング規約（簡易版）(r1) | テスト命名規則、インターフェース設計 |
| E-03 共通ライブラリ(pkg)設計書 (r1) | pkgパッケージ構成 |
| D-09 Auth Server詳細設計書 (r8) | パッケージ構成、インターフェース定義 |
| D-10 Acct Server詳細設計書 (r4) | パッケージ構成、重複検出 |
| D-11 Vector API詳細設計書 (r5) | テストモード実装、Milenage計算、SQN管理 |
| D-12 Vector Gateway詳細設計書 (r3) | PLMNルーティング |
| D-05 Admin TUI詳細設計書 前半 (r5) | TUIパッケージ構成 |
| D-07 Admin TUI詳細設計書 後半 (r3) | TUIパッケージ構成 |

### 1.4 テストID体系

単体テストケースには以下の体系でIDを付与する。

```
UT-{コンポーネント}-{パッケージ}-{連番}
```

**コンポーネントコード：**

| コード | コンポーネント | 対象ディレクトリ |
|:------|:-------------|:---------------|
| PKG | 共通ライブラリ | `pkg/` |
| VAPI | Vector API | `apps/vector-api/` |
| AUTH | Auth Server | `apps/auth-server/` |
| ACCT | Acct Server | `apps/acct-server/` |
| VGW | Vector Gateway | `apps/vector-gateway/` |
| TUI | Admin TUI | `apps/admin-tui/` |

**パッケージコード例：**

| パッケージコード | パッケージ | 使用コンポーネント |
|:--------------|:---------|:----------------|
| APPERR | `apperr` | PKG |
| MODEL | `model` | PKG |
| LOG | `logging` | PKG |
| VALKEY | `valkey` | PKG |
| HTTPUTIL | `httputil` | PKG |
| CONFIG | `config` | 全コンポーネント |
| MIL | `milenage` | VAPI |
| SQN | `sqn` | VAPI |
| DTO | `dto` | VAPI |
| HANDLER | `handler` | VAPI, AUTH, VGW |
| USECASE | `usecase` | VAPI |
| STORE | `store` | VAPI, AUTH, ACCT, TUI |
| TMODE | `testmode` | VAPI |
| ENGINE | `engine` | AUTH |
| EAP | `eap` | AUTH |
| AKA | `aka` | AUTH |
| AKAPRIME | `akaprime` | AUTH |
| RADIUS | `radius` | AUTH, ACCT |
| VECTOR | `vector` | AUTH |
| POLICY | `policy` | AUTH |
| SESSION | `session` | AUTH, ACCT |
| SERVER | `server` | AUTH, ACCT |
| BACKEND | `backend` | VGW |
| ROUTER | `router` | VGW |
| AUDIT | `audit` | TUI |
| CSV | `csv` | TUI |
| FORMAT | `format` | TUI |
| VALID | `validation` | TUI |

**ID例：**

```
UT-PKG-APPERR-001   → pkg/apperr の1番目のテストケース
UT-VAPI-MIL-003     → vector-api/milenage の3番目のテストケース
UT-AUTH-ENGINE-012   → auth-server/engine の12番目のテストケース
UT-ACCT-RADIUS-005   → acct-server/radius の5番目のテストケース
UT-VGW-ROUTER-002   → vector-gateway/router の2番目のテストケース
UT-TUI-VALID-010    → admin-tui/validation の10番目のテストケース
```

---

## 2. テスト環境

### 2.1 実行環境

| 項目 | 内容 |
|------|------|
| OS | Ubuntu Server 24.04 / WSL2 |
| Go | 1.25.x |
| 実行方法 | `go test` コマンド |
| カバレッジ | `go test -cover` / `-coverprofile` |

### 2.2 依存ツール

| ツール | 用途 | バージョン |
|--------|------|-----------|
| Go標準 `testing` | テストフレームワーク | Go同梱 |
| `go.uber.org/mock/mockgen` | モック自動生成 | latest |
| `github.com/alicebob/miniredis/v2` | インメモリValkey | latest |
| `github.com/stretchr/testify` | アサーション | latest |
| `net/http/httptest` | HTTPテスト | Go標準 |

### 2.3 テスト実行コマンド

```bash
# 単一パッケージのテスト実行
go test ./internal/{package}/...

# アプリケーション全体のテスト実行
cd apps/{app-name}
go test ./...

# カバレッジ付き実行
go test -cover ./...

# カバレッジレポート生成
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out

# 特定テスト関数のみ実行
go test -run TestFunctionName ./internal/{package}/...

# 詳細出力
go test -v ./...
```

### 2.4 モック生成

```bash
# インターフェースファイルからモック生成
go generate ./...

# 個別パッケージ
cd internal/{package}
go generate ./...
```

生成されるモックファイルは `mock_interfaces.go` として同一パッケージ内に配置される。

---

## 3. テスト方針

### 3.1 レイヤー別テスト方針

T-01 セクション2.2で定義されたレイヤー別方針に準拠する。

| レイヤー | テスト内容 | モック対象 | テスト粒度 |
|---------|-----------|-----------|-----------|
| handler | リクエスト解析、レスポンス生成 | usecase層 | 関数単位 |
| usecase | ビジネスロジック | repository, client | 関数単位 |
| store | データアクセスロジック | Valkey（miniredis使用） | 関数単位 |
| domain | ドメインロジック（計算、検証） | なし（純粋関数） | 関数単位 |

### 3.2 モック戦略

T-01 セクション5で定義されたモック戦略に準拠する。

| テストダブル種類 | 用途 | 使用場面 |
|:--------------|:-----|:--------|
| Mock（mockgen） | 呼び出し検証、戻り値制御 | usecase、handlerのテスト |
| Stub | 固定値返却 | 外部サービス応答の模倣 |
| Fake（miniredis） | 簡易実装 | store層、session層のテスト |
| Spy | 呼び出し記録 | ログ出力検証 |

### 3.3 テストデータ戦略

T-01 セクション6で定義されたテストデータ戦略に準拠する。

**3GPP TS 35.208 テストベクター（Test Set 1）：**

| 項目 | 値 |
|------|-----|
| Ki | `465b5ce8b199b49faa5f0a2ee238a6bc` |
| OPc | `cd63cb71954a9f4e48a5994e37a02baf` |
| RAND | `23553cbe9637a89d218ae64dae47bf35` |
| SQN | `0xff9bb4d0b607` |
| AMF | `b9b9` |

**テスト用IMSIプレフィックス：** `00101`

### 3.4 テスト命名規則

E-02 コーディング規約に準拠する。

| 規則 | 説明 | 例 |
|------|------|-----|
| テスト関数 | `Test` + テスト対象関数名 | `TestGetVector_Success` |
| サブテスト | `t.Run` で分類 | `t.Run("正常系_基本", ...)` |
| テストファイル | `_test.go` サフィックス | `handler_test.go` |
| テーブル駆動 | `tests` 変数にケース定義 | `tests := []struct{...}` |

### 3.5 テストカテゴリ

各テストケースは以下のカテゴリに分類する。

| カテゴリ | 説明 | テスト例 |
|---------|------|---------|
| 正常系 | 正常な入力に対する期待動作 | 有効なIMSIでのベクター生成成功 |
| 異常系 | エラー入力・障害時の処理 | IMSI未登録時のエラー返却 |
| 境界値 | 境界条件での動作 | SQN最大値付近でのインクリメント |

---

## 4. テスト対象一覧

### 4.1 コンポーネント別概要

| コンポーネント | テストファイル数 | テスト関数数 | テストケース数 | カバレッジ目標 |
|:-------------|:--------------:|:----------:|:------------:|:------------:|
| pkg（共通ライブラリ） | 12 | 58 | 127 | 80% |
| vector-api | 13 | 52 | 105 | 80% |
| auth-server | 26 | 235 | 238 | 80% |
| acct-server | 20 | 97 | 120 | 80% |
| vector-gateway | 7 | 39 | 81 | 80% |
| admin-tui | 14 | 87 | 205 | 80% |
| **合計** | **92** | **568** | **876** | **80%** |

### 4.2 パッケージ別テスト対象サマリ

> **注記：** 各テストケースの詳細はsubdoc（セクション5）を参照。以下はパッケージ別サマリ。

#### pkg（共通ライブラリ）

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| apperr | `errors_test.go`, `custom_test.go` | ~7 | 80% |
| model | `subscriber_test.go`, `session_test.go`, `policy_test.go`, `client_test.go` | ~12 | 80% |
| logging | `masking_test.go`, `fields_test.go` | ~10 | 80% |
| valkey | `client_test.go`, `options_test.go` | ~12 | 80% |
| httputil | `problem_test.go`, `gin_test.go` | ~15 | 80% |

#### vector-api

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| config | `config_test.go` | ~4 | 70% |
| milenage | `calculator_test.go`, `hex_test.go`, `resync_test.go` | ~10 | 90% |
| sqn | `manager_test.go`, `validator_test.go` | ~7 | 90% |
| dto | `error_test.go` | ~1 | 60% |
| handler | `vector_test.go` | ~4 | 80% |
| usecase | `vector_test.go`, `error_test.go` | ~22 | 80% |
| testmode | `testvector_test.go` | ~2 | 70% |

#### auth-server

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| config | `config_test.go` | ~7 | 70% |
| engine | `engine_test.go` | ~20+ | 80% |
| eap | `packet_test.go`, `statemachine_test.go`, `identity_test.go` | ~15 | 80% |
| eap/aka | `challenge_test.go`, `keys_test.go` | ~6 | 80% |
| eap/akaprime | `challenge_test.go`, `keys_test.go` | ~4+ | 80% |
| radius | `packet_test.go`, `authenticator_test.go`, `proxystate_test.go`, `response_test.go`, `status_test.go` | ~20 | 80% |
| logging | `mask_test.go` | ~1 | 60% |
| vector | `client_test.go` | ~12 | 80% |
| policy | `evaluator_test.go`, `avp_test.go` | ~17 | 80% |
| session | `context_test.go`, `session_test.go` | ~21 | 80% |
| store | `store_test.go`, `convert_test.go`, `policy_test.go` | ~12 | 80% |
| server | `server_test.go`, `secret_test.go`, `handler_test.go` | ~10+ | 80% |

#### acct-server

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| config | `config_test.go` | ~5 | 70% |
| server | `secret_test.go`, `handler_test.go` | ~8+ | 80% |
| radius | `authenticator_test.go`, `response_test.go`, `attributes_test.go`, `message_authenticator_test.go`, `status_test.go` | ~20+ | 80% |
| acct | `start_test.go`, `interim_test.go`, `stop_test.go`, `duplicate_test.go`, `errors_test.go` | ~30+ | 80% |
| session | `manager_test.go`, `identifier_test.go` | ~15+ | 80% |
| store | `client_test.go`, `session_test.go`, `duplicate_test.go`, `convert_test.go` | ~20+ | 80% |
| logging | `mask_test.go` | ~1 | 60% |

#### vector-gateway

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| config | `config_test.go` | ~8 | 70% |
| handler | `vector_test.go` | ~9 | 80% |
| backend | `internal_test.go`, `errors_test.go`, `registry_test.go` | ~12 | 80% |
| router | `router_test.go` | ~7 | 80% |
| logging | `mask_test.go` | ~1 | 60% |

#### admin-tui

| パッケージ | テストファイル | テスト関数数 | カバレッジ目標 |
|:---------|:------------|:----------:|:------------:|
| config | `config_test.go` | ~1 | 70% |
| store | `keys_test.go` | ~5 | 80% |
| audit | `logger_test.go` | ~9 | 80% |
| csv | `subscriber_test.go`, `client_test.go`, `policy_test.go` | ~26 | 80% |
| format | `bytes_test.go`, `time_test.go`, `truncate_test.go` | ~10+ | 70% |
| model | `policy_test.go` | ~5 | 80% |
| validation | `rules_test.go`, `subscriber_test.go`, `client_test.go`, `policy_test.go` | ~30+ | 80% |

---

## 5. コンポーネント別テストケース詳細

各コンポーネントの詳細テストケースは、以下のsubdocsに記載する。

| コンポーネント | subdoc | テストケース数 |
|:-------------|:-------|:------------:|
| pkg（共通ライブラリ） | [T-02_UT-PKG_共通ライブラリ_テスト仕様](subdocs/T-02_UT-PKG_共通ライブラリ_テスト仕様.md) | 127 |
| Vector API | [T-02_UT-VAPI_Vector_API_テスト仕様](subdocs/T-02_UT-VAPI_Vector_API_テスト仕様.md) | 105 |
| Auth Server | [T-02_UT-AUTH_Auth_Server_テスト仕様](subdocs/T-02_UT-AUTH_Auth_Server_テスト仕様.md) | 238 |
| Acct Server | [T-02_UT-ACCT_Acct_Server_テスト仕様](subdocs/T-02_UT-ACCT_Acct_Server_テスト仕様.md) | 120 |
| Vector Gateway | [T-02_UT-VGW_Vector_Gateway_テスト仕様](subdocs/T-02_UT-VGW_Vector_Gateway_テスト仕様.md) | 81 |
| Admin TUI | [T-02_UT-TUI_Admin_TUI_テスト仕様](subdocs/T-02_UT-TUI_Admin_TUI_テスト仕様.md) | 205 |

各subdocの構成は統一テンプレートに従う（セクション5.1参照）。

### 5.1 subdoc統一テンプレート

各subdocの各パッケージセクションは以下の構造で記述する。

```markdown
### X.Y {パッケージ名}

**テストファイル:** `internal/{pkg}/{file}_test.go`
**カバレッジ目標:** 80%
**モック方式:** mockgen / miniredis / なし

#### テストケース

| ID | テスト関数 | サブテスト名 | カテゴリ | テスト内容 | 期待結果 |
|:---|:---------|:-----------|:-------|:---------|:--------|
| UT-XXX-YYY-001 | TestFunc | 正常系_基本 | 正常系 | ... | ... |
| UT-XXX-YYY-002 | TestFunc | 異常系_nil | 異常系 | ... | ... |
```

**カテゴリ分類：** 正常系 / 異常系 / 境界値

---

## 6. 合格基準

### 6.1 T-01 品質ゲート対応

T-01 セクション7.1で定義された品質ゲートに対応する。

| 項目 | 基準 | 検証方法 |
|------|------|---------|
| テスト成功率 | 100% | `go test ./...` 全PASS |
| 主要パスカバレッジ | 80%以上 | handler, usecase, store層 |
| 全体カバレッジ | 60%以上 | 参考値（必須ではない） |
| 静的解析 | エラー0件 | `go vet ./...` |
| フォーマット | 差分0件 | `gofmt -d .` |

### 6.2 パッケージ別必須カバレッジ

T-01 セクション7.1のカバレッジ計測対象に準拠する。

| パッケージ区分 | 必須カバレッジ | 対象例 |
|:-------------|:------------:|:------|
| handler | 80% | 各コンポーネントの `internal/handler` |
| usecase | 80% | vector-apiの `internal/usecase` |
| store | 80% | 各コンポーネントの `internal/store` |
| session | 80% | auth-server, acct-serverの `internal/session` |
| milenage | 90% | vector-apiの `internal/milenage`（計算ロジック重要） |
| sqn | 90% | vector-apiの `internal/sqn`（計算ロジック重要） |
| config | 70% | 各コンポーネントの `internal/config` |
| その他 | 60% | logging, dto等 |

### 6.3 コンポーネント別合格判定

| コンポーネント | テスト全PASS | 主要パス80%以上 | 重点パッケージ |
|:-------------|:----------:|:-------------:|:------------|
| pkg | 必須 | 必須 | apperr, valkey, model |
| vector-api | 必須 | 必須 | milenage(90%), sqn(90%), usecase |
| auth-server | 必須 | 必須 | engine, eap, session, policy |
| acct-server | 必須 | 必須 | acct, session, store |
| vector-gateway | 必須 | 必須 | handler, backend, router |
| admin-tui | 必須 | 必須 | validation, csv, store |

---

## 7. 実行・レポート手順

### 7.1 全体テスト実行

```bash
# Go Workspace全体のテスト実行
cd /path/to/eapaka-radius-server-poc

# pkg
cd pkg && go test ./... && cd ..

# 各アプリケーション
cd apps/vector-api && go test ./... && cd ../..
cd apps/auth-server && go test ./... && cd ../..
cd apps/acct-server && go test ./... && cd ../..
cd apps/vector-gateway && go test ./... && cd ../..
cd apps/admin-tui && go test ./... && cd ../..
```

### 7.2 カバレッジレポート生成

```bash
# 個別パッケージのカバレッジ
cd apps/{app-name}
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html

# パッケージ別カバレッジ確認
go test -cover ./... 2>&1 | grep -E "^ok|coverage"

# 関数別カバレッジ
go tool cover -func=coverage.out
```

### 7.3 カバレッジレポートの読み方

```
ok      apps/auth-server/internal/handler   0.032s  coverage: 85.2% of statements
ok      apps/auth-server/internal/session    0.045s  coverage: 82.1% of statements
ok      apps/auth-server/internal/store      0.028s  coverage: 78.5% of statements
```

- `coverage: XX.X% of statements`: ステートメントカバレッジ
- 主要パッケージ（handler, usecase, store, session）が80%以上であることを確認
- milenage, sqnパッケージが90%以上であることを確認

### 7.4 テスト失敗時の対応

1. 失敗テストの特定：`go test -v ./...` で詳細出力
2. 個別テスト実行：`go test -run TestFunctionName -v ./internal/{package}/...`
3. カバレッジ不足時：不足パスを特定し、テストケース追加
4. 修正後の再実行：該当パッケージのテストを再実行して確認

---

## 付録A テストID-テスト関数 全対応一覧表

全876テストケースのID範囲をコンポーネント・パッケージ別に示す。各テストケースの詳細（テスト関数名、サブテスト名、テスト内容、期待結果）は対応するsubdocを参照。

### A.1 pkg（共通ライブラリ）— 127件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| apperr（センチネルエラー） | UT-PKG-APPERR-001 〜 024 | 24 | §1.1 |
| apperr（カスタムエラー型） | UT-PKG-APPERR-025 〜 038 | 14 | §1.2 |
| model（Subscriber） | UT-PKG-MODEL-001 〜 010 | 10 | §2.1 |
| model（Session） | UT-PKG-MODEL-011 〜 019 | 9 | §2.2 |
| model（Policy） | UT-PKG-MODEL-020 〜 025 | 6 | §2.3 |
| model（Client） | UT-PKG-MODEL-026 〜 029 | 4 | §2.4 |
| logging（マスク処理） | UT-PKG-LOG-001 〜 014 | 14 | §3.1 |
| logging（構造化ログ） | UT-PKG-LOG-015 〜 025 | 11 | §3.2 |
| valkey（オプション） | UT-PKG-VALKEY-001 〜 010 | 10 | §4.1 |
| valkey（クライアント） | UT-PKG-VALKEY-011 〜 017 | 7 | §4.2 |
| httputil（ProblemDetail） | UT-PKG-HTTPUTIL-001 〜 010 | 10 | §5.1 |
| httputil（Ginヘルパー） | UT-PKG-HTTPUTIL-011 〜 018 | 8 | §5.2 |

### A.2 Vector API — 105件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| config | UT-VAPI-CONFIG-001 〜 004 | 4 | §1.1 |
| milenage（Calculator） | UT-VAPI-MIL-001 〜 015 | 15 | §2.1 |
| milenage（Hex） | UT-VAPI-MIL-016 〜 020 | 5 | §2.2 |
| milenage（Resync） | UT-VAPI-MIL-021 〜 025 | 5 | §2.3 |
| sqn（Manager） | UT-VAPI-SQN-001 〜 016 | 16 | §3.1 |
| sqn（Validator） | UT-VAPI-SQN-017 〜 026 | 10 | §3.2 |
| dto | UT-VAPI-DTO-001 | 1 | §4.1 |
| handler | UT-VAPI-HANDLER-001 〜 015 | 15 | §5.1 |
| usecase（Vector） | UT-VAPI-USECASE-001 〜 018 | 18 | §6.1 |
| usecase（Error） | UT-VAPI-USECASE-019 〜 026 | 8 | §6.2 |
| testmode | UT-VAPI-TMODE-001 〜 008 | 8 | §7.1 |

### A.3 Auth Server — 238件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| config | UT-AUTH-CONFIG-001 〜 010 | 10 | §1.1 |
| engine | UT-AUTH-ENGINE-001 〜 031 | 31 | §2.1 |
| eap | UT-AUTH-EAP-001 〜 034 | 34 | §3.1-3.3 |
| eap/aka | UT-AUTH-AKA-001 〜 012 | 12 | §4.1-4.2 |
| eap/akaprime | UT-AUTH-AKAPRIME-001 〜 020 | 20 | §5.1-5.2 |
| radius | UT-AUTH-RADIUS-001 〜 039 | 39 | §6.1-6.5 |
| logging | UT-AUTH-LOG-001 〜 005 | 5 | §7.1 |
| policy | UT-AUTH-POLICY-001 〜 017 | 17 | §8.1-8.2 |
| session | UT-AUTH-SESSION-001 〜 021 | 21 | §9.1-9.2 |
| store | UT-AUTH-STORE-001 〜 018 | 18 | §10.1-10.3 |
| vector | UT-AUTH-VECTOR-001 〜 012 | 12 | §11.1 |
| server | UT-AUTH-SERVER-001 〜 019 | 19 | §12.1-12.3 |

### A.4 Acct Server — 120件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| config | UT-ACCT-CONFIG-001 〜 007 | 7 | §1.1 |
| store（Client） | UT-ACCT-STORE-001 〜 005 | 5 | §2.1 |
| store（Session） | UT-ACCT-STORE-006 〜 012 | 7 | §2.2 |
| store（Duplicate） | UT-ACCT-STORE-013 〜 016 | 4 | §2.3 |
| store（Convert） | UT-ACCT-STORE-017 〜 022 | 6 | §2.4 |
| logging | UT-ACCT-LOG-001 〜 005 | 5 | §3.1 |
| radius（Authenticator） | UT-ACCT-RADIUS-001 〜 002 | 2 | §4.1 |
| radius（Response） | UT-ACCT-RADIUS-003 | 1 | §4.2 |
| radius（Attributes） | UT-ACCT-RADIUS-004 〜 008 | 5 | §4.3 |
| radius（MA） | UT-ACCT-RADIUS-009 〜 015 | 7 | §4.4 |
| radius（Status） | UT-ACCT-RADIUS-016 〜 020 | 5 | §4.5 |
| session（Manager） | UT-ACCT-SESS-001 〜 007 | 7 | §5.1 |
| session（Identifier） | UT-ACCT-SESS-008 〜 019 | 12 | §5.2 |
| acct（Errors） | UT-ACCT-ACCT-001 〜 005 | 5 | §6.1 |
| acct（Duplicate） | UT-ACCT-ACCT-006 〜 014 | 9 | §6.2 |
| acct（Start） | UT-ACCT-ACCT-015 〜 019 | 5 | §6.3 |
| acct（Interim） | UT-ACCT-ACCT-020 〜 024 | 5 | §6.4 |
| acct（Stop） | UT-ACCT-ACCT-025 〜 027 | 3 | §6.5 |
| server（Secret） | UT-ACCT-SERVER-001 〜 006 | 6 | §7.1 |
| server（Handler） | UT-ACCT-SERVER-007 〜 020 | 14 | §7.2 |

### A.5 Vector Gateway — 81件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| config（Load） | UT-VGW-CONFIG-001 〜 008 | 8 | §1.1 |
| config（PLMNMap） | UT-VGW-CONFIG-009 〜 033 | 25 | §1.2 |
| backend（Errors） | UT-VGW-BACKEND-001 〜 004 | 4 | §2.1 |
| backend（Internal） | UT-VGW-BACKEND-005 〜 012 | 8 | §2.2 |
| backend（Registry） | UT-VGW-BACKEND-013 〜 015 | 3 | §2.3 |
| router | UT-VGW-ROUTER-001 〜 011 | 11 | §3.1 |
| handler | UT-VGW-HANDLER-001 〜 014 | 14 | §4.1 |
| logging | UT-VGW-LOG-001 〜 008 | 8 | §5.1 |

### A.6 Admin TUI — 205件

| パッケージ | ID範囲 | 件数 | subdoc参照セクション |
|:---------|:-------|:---:|:------------------|
| config | UT-TUI-CONFIG-001 〜 003 | 3 | §1.1 |
| store | UT-TUI-STORE-001 〜 005 | 5 | §2.1 |
| audit | UT-TUI-AUDIT-001 〜 009 | 9 | §3.1 |
| format（Bytes） | UT-TUI-FMT-001 〜 013 | 13 | §4.1 |
| format（Time） | UT-TUI-FMT-014 〜 026 | 13 | §4.2 |
| format（Truncate/Pad） | UT-TUI-FMT-027 〜 047 | 21 | §4.3 |
| model（Policy） | UT-TUI-MODEL-001 〜 011 | 11 | §5.1 |
| validation（Rules） | UT-TUI-VALID-001 〜 056 | 56 | §6.1 |
| validation（Subscriber） | UT-TUI-VALID-057 〜 085 | 29 | §6.2 |
| validation（Client） | UT-TUI-VALID-086 〜 115 | 30 | §6.3 |
| validation（Policy） | UT-TUI-VALID-116 〜 149 | 34 | §6.4 |
| csv（Subscriber） | UT-TUI-CSV-001 〜 011 | 11 | §7.1 |
| csv（Client） | UT-TUI-CSV-012 〜 023 | 12 | §7.2 |
| csv（Policy） | UT-TUI-CSV-024 〜 037 | 14 | §7.3 |

### A.7 全体サマリ

| コンポーネント | ID範囲 | テストケース数 |
|:-------------|:-------|:------------:|
| pkg | UT-PKG-*-001 〜 UT-PKG-*-xxx | 127 |
| vector-api | UT-VAPI-*-001 〜 UT-VAPI-*-xxx | 105 |
| auth-server | UT-AUTH-*-001 〜 UT-AUTH-*-xxx | 238 |
| acct-server | UT-ACCT-*-001 〜 UT-ACCT-*-xxx | 120 |
| vector-gateway | UT-VGW-*-001 〜 UT-VGW-*-xxx | 81 |
| admin-tui | UT-TUI-*-001 〜 UT-TUI-*-xxx | 205 |
| **合計** | | **876** |

---

## 付録B 参照subdocs一覧

| No. | ファイル名 | 対象コンポーネント | 作成フェーズ |
|:---:|:---------|:---------------|:----------:|
| 1 | [T-02_UT-PKG_共通ライブラリ_テスト仕様.md](subdocs/T-02_UT-PKG_共通ライブラリ_テスト仕様.md) | pkg（共通ライブラリ） | フェーズ1 |
| 2 | [T-02_UT-VAPI_Vector_API_テスト仕様.md](subdocs/T-02_UT-VAPI_Vector_API_テスト仕様.md) | Vector API | フェーズ2 |
| 3 | [T-02_UT-AUTH_Auth_Server_テスト仕様.md](subdocs/T-02_UT-AUTH_Auth_Server_テスト仕様.md) | Auth Server | フェーズ3-4 |
| 4 | [T-02_UT-ACCT_Acct_Server_テスト仕様.md](subdocs/T-02_UT-ACCT_Acct_Server_テスト仕様.md) | Acct Server | フェーズ5 |
| 5 | [T-02_UT-VGW_Vector_Gateway_テスト仕様.md](subdocs/T-02_UT-VGW_Vector_Gateway_テスト仕様.md) | Vector Gateway | フェーズ6 |
| 6 | [T-02_UT-TUI_Admin_TUI_テスト仕様.md](subdocs/T-02_UT-TUI_Admin_TUI_テスト仕様.md) | Admin TUI | フェーズ6 |

---

## 改訂履歴

| 版数 | 日付 | 内容 |
|------|------|------|
| r1 | 2026-02-07 | 初版作成（全フェーズ完了、876テストケース） |
