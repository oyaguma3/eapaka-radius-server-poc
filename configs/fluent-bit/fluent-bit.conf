[SERVICE]
    Flush        1
    Daemon       Off
    Log_Level    info
    Parsers_File parsers.conf

[INPUT]
    Name         forward
    Listen       0.0.0.0
    Port         24224
    Mem_Buf_Limit 5MB

# Auth Server ログ
[FILTER]
    Name         rewrite_tag
    Match        auth-server.*
    Rule         $app ^(auth-server)$ auth-server false

[OUTPUT]
    Name         file
    Match        auth-server
    Path         /output_logs
    File         auth-server.log
    Format       plain

# Acct Server ログ
[FILTER]
    Name         rewrite_tag
    Match        acct-server.*
    Rule         $app ^(acct-server)$ acct-server false

[OUTPUT]
    Name         file
    Match        acct-server
    Path         /output_logs
    File         acct-server.log
    Format       plain

# Vector Gateway ログ
[FILTER]
    Name         rewrite_tag
    Match        vector-gateway.*
    Rule         $app ^(vector-gateway)$ vector-gateway false

[OUTPUT]
    Name         file
    Match        vector-gateway
    Path         /output_logs
    File         vector-gateway.log
    Format       plain

# Vector API ログ
[FILTER]
    Name         rewrite_tag
    Match        vector-api.*
    Rule         $app ^(vector-api)$ vector-api false

[OUTPUT]
    Name         file
    Match        vector-api
    Path         /output_logs
    File         vector-api.log
    Format       plain

# Valkey ログ
[FILTER]
    Name         rewrite_tag
    Match        valkey.*
    Rule         $log .* valkey false

[OUTPUT]
    Name         file
    Match        valkey
    Path         /output_logs
    File         valkey.log
    Format       plain

# その他（マッチしなかったログ）
[OUTPUT]
    Name         file
    Match        *
    Path         /output_logs
    File         others.log
    Format       plain
